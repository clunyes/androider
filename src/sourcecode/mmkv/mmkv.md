MMKV 是基于 mmap 内存映射的 key-value 组件，底层序列化/反序列化使用 protobuf 实现，性能高，稳定性强。
mmap内存映射保证了，内存和文件数据一致。

### MMKV 原理

- 内存准备
通过 mmap 内存映射文件，提供一段可供随时写入的内存块，App 只管往里面写数据，
由操作系统负责将内存回写到文件，不必担心 crash 导致数据丢失。
- 数据组织
数据序列化方面我们选用 protobuf 协议，pb 在性能和空间占用上都有不错的表现。
- 写入优化
考虑到主要使用场景是频繁地进行写入更新，我们需要有增量更新的能力。我们考虑将增量 kv 对象序列化后，append 到内存末尾。
- 空间增长
使用 append 实现增量更新。在空间用尽之前都是 append 模式；当 append 到文件末尾时，
进行文件重整、key 排重，尝试序列化保存排重结果；排重后空间还是不够用的话，将文件扩大一倍，直到空间足够。
- 数据有效性
数据校验，对无效数据进行甄别。