# Hook技术
## Hook技术分类

**根据Hook的API语言划分，分为Hook Java和Hook Native。**  
Hook Java主要通过反射和代理来实现，用于在SDK开发环境中修改Java代码。  
Hook Native则应用于在NDK开发环境和系统开发中修改Native代码。  
**根据Hook的进程划分，分为应用程序进程Hook和全局Hook。**  
应用程序进程Hook只能Hook当前所在的应用程序进程。  
应用程序进程是Zygote进程fork出来的，如果对Zygote进行Hook，就可以实现Hook系统所有的应用程序进程，这就是全局Hook。  
**根据Hook的实现方式划分，分为如下两种：**  
通过反射和代理实现，只能Hook当前的应用程序进程。  
通过Hook框架实现，比如Xposed，可以实现全局Hook，但是需要root。



## Hook原理
> 创建一个代理对象，然后把原始对象替换为我们的代理对象，这样就可以在这个代理对象为所欲为，修改参数或替换返回值。



## Hook的过程
> Step1. 寻找Hook点，原则是`静态变量`或者`单例对象`，尽量Hook `public`的对象和方法，非public不保证每个版本都一样，需要适配。
Step2. 选择合适的代理方式，如果是`接口`可以用`动态代理`；如果是类可以用`静态代理`。
Step3. 偷梁换柱——用代理对象替换原始对象。



hook采用的办法，代理模式分为静态代理，动态代理

静态代理编码期间确定代理对象

动态代理，只确定代理操作，不需要确定代理对象



